<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Teaching Schedule Visualizer</title>
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
 <script type="text/javascript">
 function searchInstructors() {
	 var pname = document.getElementById("pname").value;
	 var disc = document.getElementById("disc").value;
	 if(pname || disc) {
		$.getJSON("getUBCID.php", {pname:pname, disc:disc}, function (data) {
		$("#results").empty();
		if(data.length==0) $("#results").html("Your search returned 0 results!");
		else {
		var resultTable = document.createElement("table");
		var tableHeader = resultTable.createTHead();
		var headerRow = tableHeader.insertRow(0);
		var nameHead = headerRow.insertCell(0);
		var idHead = headerRow.insertCell(1);
		var showHead = headerRow.insertCell(2);
		var forceHead = headerRow.insertCell(3);
		nameHead.innerHTML = "Name";
		idHead.innerHTML = "UBCID";
		showHead.innerHTML = "Display?";
		forceHead.innerHTML = "Force Update";
		
		resultTable.setAttribute("id", "resultTable");
		$.each(data, function(key, value) {
			var newRow = resultTable.insertRow(-1);
			var profName = newRow.insertCell(0);
			profName.innerHTML = key;
			var ubcid = newRow.insertCell(1);
			ubcid.innerHTML = value;
			var viewSchedule = newRow.insertCell(2);
			var viewButton = document.createElement("input");
			viewButton.setAttribute("type", "checkbox");
			viewButton.setAttribute("value", value);
			viewSchedule.appendChild(viewButton);
			var update = newRow.insertCell(3);
			var forceUpdate = document.createElement("input");
			forceUpdate.setAttribute("type", "checkbox");
			forceUpdate.setAttribute("value", value);
			update.appendChild(forceUpdate);
			$("#results").append($(resultTable));
		});
		}
		});
	 } else $("#results").html("You must enter a name or discipline to search!");
 }
 
 function viewSchedule() {
	
 }
 </script>
 <style type="text/css">
 #resultTable {
 	border:1px solid #000;
	width:400px;
 }
 </style>
</head>
<body>
<form>
<label for="pname">Instructor:</label>
<input type="text" id="pname" name="pname" /><br />
<label for="disc">Discipline:</label>
<input type="text" id="disc" name="disc" />
<br />
<input type="button" value="Search" onclick="searchInstructors()" />
</form>
<br />
<span id="results">
</span>
</body>
</html>
